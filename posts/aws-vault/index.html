<!doctype html><html lang=en><head><title>Security Basics in AWS or How To Get Rid of Hardcoded Credential and Reduce Data Leakage Risks with aws-vault · Vladimir Samoylov</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta http-equiv=Content-Security-Policy content="upgrade-insecure-requests; block-all-mixed-content; default-src 'self'; child-src 'self'; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net/; form-action 'self'; frame-src 'self'; img-src 'self' https://cdnjs.cloudflare.com/ajax/libs/photoswipe/; object-src 'none'; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net/ https://cdnjs.cloudflare.com/ajax/libs/photoswipe/; script-src 'self' 'unsafe-inline' https://code.jquery.com/ https://cdnjs.cloudflare.com/ajax/libs/photoswipe/ https://twemoji.maxcdn.com https://static.cloudflareinsights.com/; connect-src 'self';"><meta name=author content="Vladimir Samoylov"><meta name=description content="Developers often hardcode credentials on a public or private GitHub repository, ramping up data leakage risks. It’s hardly better to store static credentials in the .aws/credentials folder on a server or a local operator machine. As american cryptographer, writer, and computer security specialist, Bruce Schneier, says:  . &ldquo;Only amateurs attackWe machines; professionals target people.&rdquo; Therefore, you, not your hardware, is at risk.
By executing fraudulent software, cybercriminals can easily steal all the data from the folder or a whole directory with your, your friends’, and clients’ credentials. Even the AWS support team is exhausted with constant tickets regarding stolen credentials from public Git repos. Here&rsquo;s why if you commit keys, expect an email in 3-5 minutes saying that the IAM policy has been applied. It means that you can’t get rid of the policy or destroy exposed credentials."><meta name=keywords content="devops,k8s,aws,terraform,cloud,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Security Basics in AWS or How To Get Rid of Hardcoded Credential and Reduce Data Leakage Risks with aws-vault"><meta name=twitter:description content="Developers often hardcode credentials on a public or private GitHub repository, ramping up data leakage risks. It’s hardly better to store static credentials in the .aws/credentials folder on a server or a local operator machine. As american cryptographer, writer, and computer security specialist, Bruce Schneier, says: . “Only amateurs attackWe machines; professionals target people.” Therefore, you, not your hardware, is at risk.
By executing fraudulent software, cybercriminals can easily steal all the data from the folder or a whole directory with your, your friends’, and clients’ credentials. Even the AWS support team is exhausted with constant tickets regarding stolen credentials from public Git repos. Here’s why if you commit keys, expect an email in 3-5 minutes saying that the IAM policy has been applied. It means that you can’t get rid of the policy or destroy exposed credentials."><meta property="og:url" content="https://cageyv.dev/posts/aws-vault/"><meta property="og:site_name" content="Vladimir Samoylov"><meta property="og:title" content="Security Basics in AWS or How To Get Rid of Hardcoded Credential and Reduce Data Leakage Risks with aws-vault"><meta property="og:description" content="Developers often hardcode credentials on a public or private GitHub repository, ramping up data leakage risks. It’s hardly better to store static credentials in the .aws/credentials folder on a server or a local operator machine. As american cryptographer, writer, and computer security specialist, Bruce Schneier, says: . “Only amateurs attackWe machines; professionals target people.” Therefore, you, not your hardware, is at risk.
By executing fraudulent software, cybercriminals can easily steal all the data from the folder or a whole directory with your, your friends’, and clients’ credentials. Even the AWS support team is exhausted with constant tickets regarding stolen credentials from public Git repos. Here’s why if you commit keys, expect an email in 3-5 minutes saying that the IAM policy has been applied. It means that you can’t get rid of the policy or destroy exposed credentials."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-14T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-14T00:00:00+00:00"><meta property="article:tag" content="Aws"><meta property="article:tag" content="Security"><meta property="article:tag" content="Credentials"><meta property="article:tag" content="Aws-Vault"><meta property="og:see_also" content="https://cageyv.dev/posts/aws-mvp-postgresql/"><meta property="og:see_also" content="https://cageyv.dev/posts/aws-rds-data-api/"><meta property="og:see_also" content="https://cageyv.dev/posts/aws-static-hosting/"><meta property="og:see_also" content="https://cageyv.dev/posts/aws-solutions-architect-professional/"><meta property="og:see_also" content="https://cageyv.dev/posts/aws-cloudgaming/"><meta property="og:see_also" content="https://cageyv.dev/posts/aws-cloudtrail-to-slack/"><link rel=canonical href=https://cageyv.dev/posts/aws-vault/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.2cd2ba040eaadea1390f8199e24bd994fabd69b5a7034b43fc2440c58fd09808.css integrity="sha256-LNK6BA6q3qE5D4GZ4kvZlPq9abWnA0tD/CRAxY/QmAg=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/extender.min.dd1bfc7c760f0f4622751e65a9b0ac7977915e70a1cf2faf42784bfbe851c4a1.css integrity="sha256-3Rv8fHYPD0YidR5lqbCseXeRXnChzy+vQnhL++hRxKE=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://cageyv.dev/>Vladimir Samoylov
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/experience/>Experience</a></li><li class=navigation-item><a class=navigation-link href=/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=/education/>Education</a></li><li class=navigation-item><a class=navigation-link href=/recommend/>Recommend</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://cageyv.dev/posts/aws-vault/>Security Basics in AWS or How To Get Rid of Hardcoded Credential and Reduce Data Leakage Risks with aws-vault</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2022-07-14T00:00:00Z>July 14, 2022
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
6-minute read</span></div><div class=categories><i class="fa-solid fa-folder" aria-hidden=true></i>
<a href=/categories/aws/>Aws</a></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/aws/>Aws</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/security/>Security</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/credentials/>Credentials</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/aws-vault/>Aws-Vault</a></span></div></div></header><div class=post-content><p>Developers often hardcode credentials on a public or private GitHub repository, ramping up data leakage risks. It’s hardly better to store static credentials in the .aws/credentials folder on a server or a local operator machine. As american cryptographer, writer, and computer security specialist, Bruce Schneier, says: . &ldquo;Only amateurs attackWe machines; professionals target people.&rdquo; Therefore, you, not your hardware, is at risk.</p><p>By executing fraudulent software, cybercriminals can easily steal all the data from the folder or a whole directory with your, your friends’, and clients’ credentials. Even the AWS support team is exhausted with constant tickets regarding stolen credentials from public Git repos. Here&rsquo;s why if you commit keys, expect an email in 3-5 minutes saying that the IAM policy has been applied. It means that you can’t get rid of the policy or destroy exposed credentials.</p><p><img src=/images/posts/aws_vault/1.webp alt=FistImage></p><p>Even such measures don’t solve the problem. According to the <a href=https://www.techtarget.com/searchsecurity/news/252520686/Verizon-DBIR-Stolen-credentials-led-to-nearly-50-of-attacks class=external-link target=_blank rel=noopener>Verizon 2022 Data Breach Investigations Report</a>, there’s been an almost 30% increase in stolen credentials, proving it to be a true-and-tried method to gain unauthorized access to an organization for the past five years. In fact, they account for almost half breaches.</p><p><img src=/images/posts/aws_vault/2.webp alt=FistImage></p><p>For the past 12 months, <a href=https://outpost24.com/blog/FTSE-100-compromised-credential-study-2022 class=external-link target=_blank rel=noopener>31,000+</a> stolen and leaked credentials were detected for FTSE 100 companies, while almost 40% were disclosed on the underground. The same happened with 1 billion records of Chinese <a href=https://www.reuters.com/world/china/hacker-claims-have-stolen-1-bln-records-chinese-citizens-police-2022-07-04/ class=external-link target=_blank rel=noopener>private citizens’ data</a> stolen from the Shanghai police in Summer 2022. All this was possible due to <a href=https://twitter.com/cz_binance/status/1543905416748359680 class=external-link target=_blank rel=noopener>exposed credentials</a> on CSDN—the Chinese Software Development Network.</p><p>The worst part — developers can do nothing to prevent the attack even if it’s detected quickly. <a href=https://www.comparitech.com/blog/information-security/github-honeypot/ class=external-link target=_blank rel=noopener>Honeypot results</a> showed that it takes 1 minute to find exposed credentials and launch attacks. The entire attack lasts only up to 4 minutes from the moment of exposure.</p><h2 id=use-aws-vault-to-securely-store-and-access-aws-credentials-in-a-development-environment>Use aws-vault To Securely Store and Access AWS Credentials in a Development Environment
<a class=heading-link href=#use-aws-vault-to-securely-store-and-access-aws-credentials-in-a-development-environment><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Aws-vault is a tool that has tackled the problem of stolen credentials for six years already. It stores your IAM credentials in a secure keystore and then generates temporary credentials to expose to your shell and applications. Therefore, the keys are not hard-coded or static, which decreases data leakage risks. Here are four key problems that aws-vault solves:</p><ul><li><strong>Secures access to products under development.</strong> An engineer who works on a digital solution can run tests without committing keys in public Git repos. Even if you commit your secrets in a private Git repo, you can face security risks. Since no alerts will be sent, you will find out about the incident when your product is in public access—for example, if you are about to begin a presentation, but the access to the solution is blocked.</li><li><strong>Controls what type of credentials is used.</strong> One common problem a developer faces is not understanding what credential types are used by apps. They can be local, static hardcoded ones, environment variables, containers, EC2 Instance profiles, or ECS Container task roles. Aws-vault populates environment variables but can also emulate EC2 metadata servers and ECS credential servers.</li></ul><p><img src=/images/posts/aws_vault/3.webp alt=FistImage></p><ul><li><strong>Provides seamless access across various apps.</strong> Using several accounts is the norm for developers. Each account has its own access permissions. Without hardcoding, you need to think about where to store credentials and how to distribute them across a team securely. With aws-vault, you don’t need to guard your AWS Multi-Account strategy, thinking about whether to commit keys or not. The tool sends dynamic credentials that expire in a short timeframe, which leaves a reduced window of opportunity for a hacker.</li><li><strong>Convenient navigation across several apps.</strong> Since your credentials are of the environment type, infrastructure cloud tools using AWS SDK (for example, Terraform) can easily take them and use them to permit you access. If you want to close all sessions, run the exit command. Any app automatically refreshes dynamic credentials as needed.</li></ul><h2 id=how-to-practice-with-aws-vault>How to Practice With aws-vault
<a class=heading-link href=#how-to-practice-with-aws-vault><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Most likely, currently, your logins and passwords are hardcoded. You may believe that it’s a convenient way to share credentials with your team without passing them over manually. Therefore, your code looks as follows:</p><p><img src=/images/posts/aws_vault/4.webp alt=FistImage></p><p>In this case, your data can be easily stolen and used for malicious purposes. Here’s a brief guide on how to boost your credentials’ security with aws-vault:</p><ul><li>Create an AWS account if you don’t have one. Create an IAM user and define roles. They allow you to access keys used with the API or CLI. Set secret keys, passwords, and action and access permissions.</li><li>If you use several AWS profiles, assume temporary privileges for each. You can learn more about how to do this <a href=https://github.com/99designs/aws-vault/blob/master/USAGE.md#using-multiple-profiles class=external-link target=_blank rel=noopener>here</a>.</li></ul><p>Once you are set, you can start generating environment credentials with aws-vault. Suppose you have a <strong>primitive JavaScript-based app</strong> to test. You initiate a command for the vault to take dynamic credentials and add them to development environments for the app to run. With AWS SDK, the JavaScript app will get the credentials.</p><p><img src=/images/posts/aws_vault/5.webp alt=FistImage></p><p>The process is the same if you want to deliver environmental credentials to a simple docker. Slightly edit a regular docker command, and you will receive environmental credentials.</p><p><img src=/images/posts/aws_vault/6.webp alt=FistImage></p><p>Aws-vault also allows you to <strong>simulate the ESC credential server and ES2 Instance Profile</strong>. For example, if you use the tool to deliver the credentials to <strong>docker-compose</strong>, aws-vault will pretend to be a part of the server responsible for credential transfer. The results in the development environment show that aws-vault launched a local simulation with a specific token just as on ESC. There will be remote credentials, while access key and session tokens aren’t transferred.</p><p><img src=/images/posts/aws_vault/7.webp alt=FistImage></p><p><img src=/images/posts/aws_vault/8.webp alt=FistImage></p><p>If you want to simulate ES2 Instance Profile, the tool will run a local proxy. Here, you can’t avoid using root. As a result, you get EC2 metadata credentials.</p><p><img src=/images/posts/aws_vault/9.webp alt=FistImage></p><p>You can learn more about all the explained examples here: <a href=https://github.com/cageyv/aws-vault-examples class=external-link target=_blank rel=noopener>https://github.com/cageyv/aws-vault-examples</a></p><h2 id=benefits-of-aws-vault>Benefits of aws-vault
<a class=heading-link href=#benefits-of-aws-vault><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Here are the main benefits of using aws-vault</p><ul><li><strong>Simple functionality.</strong> It takes only a couple of minutes to start using the tool. Basically, you need to create an account, and set IAM and roles, secret keys, and a password to begin.</li><li><strong>Security.</strong> Dynamic passwords that expire within a short timeframe don’t pose security threats, even if they are stolen. A cybercriminal can’t steal them, lie low, and then steal your data or app all of a sudden. Besides, if your company uses AWS Single Sign-on (SSO), aws-vault can also use credentials defined by AWS SSO ClI v2.</li><li><strong>Convenience.</strong> Thanks to AWS SDK, the whole credential chain is supported by default. You don’t need to add configurations, while the apps will refresh dynamic passwords if they expire during your session.</li><li><strong>Local testing.</strong> Aws-vault allows you to test the app in the environment where it will be launched before release. You can spot bugs and fix them without deployment or providing access to admins or DevOps.</li></ul><p>Another service that allows developing and testing apps offline is <a href=https://localstack.cloud class=external-link target=_blank rel=noopener>Local Stack</a>. It comes free and paid and serves as a metal developer that builds an app with AWS locally. Local Stack can simulate a lot of AWS services without access to the cloud to provide a seamless coding experience. The tool has a decent open-source database to speed up the coding process and let you focus on business objectives. The same applies to aws-vault, which facilitates credential transfers, reduces sensitive data leakage risks, and allows you to devote more time to meaningful tasks rather than thinking about how to pass keys without hardcoding them.</p></div><footer><section class=see-also><h3 id=see-also-in-aws>See also in AWS
<a class=heading-link href=#see-also-in-aws><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><nav><ul><li><a href=/posts/aws-mvp-postgresql/>MVP on AWS: PostgreSQL</a></li><li><a href=/posts/aws-rds-data-api/>AWS RDS Data API and CloudTrail. Who drop the table?</a></li><li><a href=/posts/aws-static-hosting/>The Multiverse of Hosting a Static HTML File on AWS</a></li><li><a href=/posts/aws-solutions-architect-professional/>Navigating the Path to AWS Solutions Architect Professional Certification</a></li><li><a href=/posts/aws-cloudgaming/>Where no Windows Machine? Luck of space? Travel a lot? Let's use AWS as is Cloud Gaming platform</a></li></ul></nav></section></footer></article></section></div><footer class=footer><section class=container>©
2019 -
2025
Vladimir Samoylov
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>